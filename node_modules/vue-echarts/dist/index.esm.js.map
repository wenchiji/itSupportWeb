{"version":3,"file":"index.esm.js","sources":["../src/composables/api.ts","../src/composables/autoresize.ts","../src/composables/loading.ts","../node_modules/style-inject/dist/style-inject.es.js","../src/utils.ts","../src/ECharts.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Ref } from \"vue-demi\";\nimport { EChartsType, Option } from \"../types\";\n\nconst METHOD_NAMES = [\n  \"getWidth\",\n  \"getHeight\",\n  \"getDom\",\n  \"getOption\",\n  \"resize\",\n  \"dispatchAction\",\n  \"convertToPixel\",\n  \"convertFromPixel\",\n  \"containPixel\",\n  \"getDataURL\",\n  \"getConnectedDataURL\",\n  \"appendData\",\n  \"clear\",\n  \"isDisposed\",\n  \"dispose\"\n] as const;\ntype MethodName = typeof METHOD_NAMES[number];\n\ntype PublicMethods = Pick<EChartsType, MethodName>;\n\nexport function usePublicAPI(\n  chart: Ref<EChartsType | undefined>,\n  init: (option?: Option) => void\n) {\n  function makePublicMethod<T extends MethodName>(\n    name: T\n  ): (...args: Parameters<EChartsType[T]>) => ReturnType<EChartsType[T]> {\n    return (...args) => {\n      if (!chart.value) {\n        init();\n      }\n\n      if (!chart.value) {\n        throw new Error(\"ECharts is not initialized yet.\");\n      }\n      return (chart.value[name] as any).apply(chart.value, args);\n    };\n  }\n\n  function makeAnyMethod<T extends MethodName>(\n    name: T\n  ): (...args: any[]) => ReturnType<EChartsType[T]> {\n    return makePublicMethod(name) as any;\n  }\n\n  function makePublicMethods(): PublicMethods {\n    const methods = Object.create(null);\n    METHOD_NAMES.forEach(name => {\n      methods[name] = makePublicMethod(name);\n    });\n\n    return methods as PublicMethods;\n  }\n\n  return {\n    ...makePublicMethods(),\n    dispatchAction: makeAnyMethod(\"dispatchAction\"),\n    getDataURL: makeAnyMethod(\"getDataURL\"),\n    getConnectedDataURL: makeAnyMethod(\"getConnectedDataURL\")\n  };\n}\n","import { Ref, watch } from \"vue-demi\";\nimport { throttle } from \"echarts/core\";\nimport { addListener, removeListener, ResizeCallback } from \"resize-detector\";\nimport { EChartsType, Option } from \"../types\";\n\nexport function useAutoresize(\n  chart: Ref<EChartsType | undefined>,\n  autoresize: Ref<boolean>,\n  root: Ref<HTMLElement | undefined>,\n  option: Ref<Option>\n): void {\n  let resizeListener: ResizeCallback | null = null;\n  let lastArea = 0;\n\n  function getArea() {\n    const el = root.value;\n    if (!el) {\n      return 0;\n    }\n    return el.offsetWidth * el.offsetHeight;\n  }\n\n  watch([root, chart, autoresize], ([root, chart, autoresize], _, cleanup) => {\n    if (root && chart && autoresize) {\n      lastArea = getArea();\n      resizeListener = throttle(() => {\n        if (lastArea === 0) {\n          chart.setOption(Object.create(null), true);\n          chart.resize();\n          chart.setOption(option.value, true);\n        } else {\n          chart.resize();\n        }\n        lastArea = getArea();\n      }, 100);\n\n      addListener(root, resizeListener);\n    }\n\n    cleanup(() => {\n      if (resizeListener && root) {\n        lastArea = 0;\n        removeListener(root, resizeListener);\n      }\n    });\n  });\n}\n\nexport const autoresizeProps = {\n  autoresize: Boolean\n};\n","import { inject, unref, computed, Ref, watchEffect } from \"vue-demi\";\nimport { EChartsType } from \"../types\";\n\nexport const LOADING_OPTIONS_KEY = \"ecLoadingOptions\";\n\nexport function useLoading(\n  chart: Ref<EChartsType | undefined>,\n  loading: Ref<boolean>,\n  loadingOptions: Ref<object | undefined>\n): void {\n  const defaultLoadingOptions = inject(LOADING_OPTIONS_KEY, {}) as\n    | object\n    | Ref<object>;\n  const realLoadingOptions = computed(() => ({\n    ...unref(defaultLoadingOptions),\n    ...loadingOptions?.value\n  }));\n\n  watchEffect(() => {\n    const instance = chart.value;\n    if (!instance) {\n      return;\n    }\n\n    if (loading.value) {\n      instance.showLoading(realLoadingOptions.value);\n    } else {\n      instance.hideLoading();\n    }\n  });\n}\n\nexport const loadingProps = {\n  loading: Boolean,\n  loadingOptions: Object\n};\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","type Attrs = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  [key: string]: any;\n};\n\n// Copied from\n// https://github.com/vuejs/vue-next/blob/5a7a1b8293822219283d6e267496bec02234b0bc/packages/shared/src/index.ts#L40-L41\nconst onRE = /^on[^a-z]/;\nexport const isOn = (key: string) => onRE.test(key);\n\nexport function omitOn(attrs: Attrs) {\n  const result: Attrs = {};\n  for (const key in attrs) {\n    if (!isOn(key)) {\n      result[key] = attrs[key];\n    }\n  }\n\n  return result;\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport {\n  defineComponent,\n  ref,\n  unref,\n  shallowRef,\n  toRef,\n  toRefs,\n  watch,\n  computed,\n  inject,\n  onMounted,\n  onUnmounted,\n  h,\n  nextTick,\n  PropType,\n  watchEffect,\n  Vue2\n} from \"vue-demi\";\nimport { init as initChart } from \"echarts/core\";\nimport {\n  EChartsType,\n  Option,\n  Theme,\n  ThemeInjection,\n  InitOptions,\n  InitOptionsInjection,\n  UpdateOptions,\n  UpdateOptionsInjection\n} from \"./types\";\nimport {\n  usePublicAPI,\n  useAutoresize,\n  autoresizeProps,\n  useLoading,\n  loadingProps\n} from \"./composables\";\nimport \"./style.css\";\nimport { omitOn } from \"./utils\";\n\nconst TAG_NAME = \"x-vue-echarts\";\n\nif (Vue2) {\n  Vue2.config.ignoredElements.push(TAG_NAME);\n}\n\nexport const THEME_KEY = \"ecTheme\";\nexport const INIT_OPTIONS_KEY = \"ecInitOptions\";\nexport const UPDATE_OPTIONS_KEY = \"ecUpdateOptions\";\nexport { LOADING_OPTIONS_KEY } from \"./composables\";\n\nexport default defineComponent({\n  name: \"echarts\",\n  props: {\n    option: Object as PropType<Option>,\n    theme: {\n      type: [Object, String] as PropType<Theme>\n    },\n    initOptions: Object as PropType<InitOptions>,\n    updateOptions: Object as PropType<UpdateOptions>,\n    group: String,\n    manualUpdate: Boolean,\n    ...autoresizeProps,\n    ...loadingProps\n  },\n  inheritAttrs: false,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  // @ts-expect-error\n  setup(props, { attrs, listeners }) {\n    const root = ref<HTMLElement>();\n    const chart = shallowRef<EChartsType>();\n    const manualOption = shallowRef<Option>();\n    const defaultTheme = inject(THEME_KEY, null) as ThemeInjection;\n    const defaultInitOptions = inject(\n      INIT_OPTIONS_KEY,\n      null\n    ) as InitOptionsInjection;\n    const defaultUpdateOptions = inject(\n      UPDATE_OPTIONS_KEY,\n      null\n    ) as UpdateOptionsInjection;\n    const realOption = computed(\n      () => manualOption.value || props.option || Object.create(null)\n    );\n    const realTheme = computed(() => props.theme || unref(defaultTheme) || {});\n    const realInitOptions = computed(\n      () => props.initOptions || unref(defaultInitOptions) || {}\n    );\n    const realUpdateOptions = computed(\n      () => props.updateOptions || unref(defaultUpdateOptions) || {}\n    );\n\n    const { autoresize, manualUpdate, loading } = toRefs(props);\n    const theme = toRef(props, \"theme\");\n    const initOptions = toRef(props, \"initOptions\");\n    const loadingOptions = toRef(props, \"loadingOptions\");\n\n    const nonEventAttrs = computed(() => omitOn(attrs));\n\n    function init(option?: Option) {\n      if (chart.value || !root.value) {\n        return;\n      }\n\n      const instance = (chart.value = initChart(\n        root.value,\n        realTheme.value,\n        realInitOptions.value\n      ));\n\n      if (props.group) {\n        instance.group = props.group;\n      }\n\n      let realListeners = listeners;\n      if (!realListeners) {\n        realListeners = {};\n\n        Object.keys(attrs)\n          .filter(key => key.indexOf(\"on\") === 0 && key.length > 2)\n          .forEach(key => {\n            // onClick    -> c + lick\n            // onZr:click -> z + r:click\n            const event = key.charAt(2).toLowerCase() + key.slice(3);\n            realListeners[event] = attrs[key];\n          });\n      }\n\n      Object.keys(realListeners).forEach(key => {\n        const handler = realListeners[key] as any;\n\n        if (!handler) {\n          return;\n        }\n\n        if (key.indexOf(\"zr:\") === 0) {\n          instance.getZr().on(key.slice(3).toLowerCase(), handler);\n        } else {\n          instance.on(key.toLowerCase(), handler);\n        }\n      });\n\n      instance.setOption(option || realOption.value, realUpdateOptions.value);\n\n      function resize() {\n        if (instance && !instance.isDisposed()) {\n          instance.resize();\n        }\n      }\n      // Make sure the chart fits the container in next UI render (after current task)\n      nextTick(resize);\n      setTimeout(resize);\n    }\n\n    function setOption(option: Option, updateOptions?: UpdateOptions) {\n      if (props.manualUpdate) {\n        manualOption.value = option;\n      }\n\n      if (!chart.value) {\n        init(option);\n      } else {\n        chart.value.setOption(option, {\n          ...realUpdateOptions.value,\n          ...updateOptions\n        });\n      }\n    }\n\n    function cleanup() {\n      if (chart.value) {\n        chart.value.dispose();\n        chart.value = undefined;\n      }\n    }\n\n    let unwatchOption: (() => void) | null = null;\n    watch(\n      manualUpdate,\n      manualUpdate => {\n        if (typeof unwatchOption === \"function\") {\n          unwatchOption();\n          unwatchOption = null;\n        }\n\n        if (!manualUpdate) {\n          unwatchOption = watch(\n            () => props.option,\n            option => {\n              if (!option) {\n                return;\n              }\n              if (!chart.value) {\n                init();\n              } else {\n                chart.value.setOption(option, props.updateOptions);\n              }\n            },\n            { deep: true }\n          );\n        }\n      },\n      {\n        immediate: true\n      }\n    );\n\n    watch(\n      [theme, initOptions],\n      () => {\n        cleanup();\n        init();\n      },\n      {\n        deep: true\n      }\n    );\n\n    watchEffect(() => {\n      if (props.group && chart.value) {\n        chart.value.group = props.group;\n      }\n    });\n\n    const publicApi = usePublicAPI(chart, init);\n\n    useLoading(chart, loading, loadingOptions);\n\n    useAutoresize(chart, autoresize, root, realOption);\n\n    onMounted(() => {\n      if (props.option) {\n        init();\n      }\n    });\n\n    onUnmounted(cleanup);\n\n    const exposed = {\n      root,\n      setOption,\n      nonEventAttrs,\n      ...publicApi\n    };\n    Object.defineProperty(exposed, \"chart\", {\n      get() {\n        return unref(chart);\n      }\n    });\n\n    return exposed;\n  },\n  render() {\n    const attrs = { ...this.nonEventAttrs };\n    attrs.ref = \"root\";\n    attrs.class = attrs.class ? [\"echarts\"].concat(attrs.class) : \"echarts\";\n    return h(TAG_NAME, attrs);\n  }\n});\n"],"names":["init","initChart"],"mappings":"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"}